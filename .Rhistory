hrt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm))
hrt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm))
View(hrt2)
is.na(hrt$bpm)
colSums(is.na(hrt$bpm))
sum(is.na(hrt$bpm))
hrt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
avg_bpm=mean(bpm))
View(hrt2)
hrt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
round(avg_bpm=mean(bpm),2))
rt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
round(avg_bpm=mean(bpm),2))
hrt2<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
avg_bpm=mean(bpm))%>%
as.integer(avg_bpm)
hrt2$avg_bpm<-as.integer(hrt2$avg_bpm)
hrt2<-hrt2%>%
group_by(date)
View(hrt2)
#remove the confidence column
hrt2%>%hrt2%>%
select(-confidence)
#remove the confidence column
hrt2<-hrt2%>%
select(-confidence)
hrt2<-hrt2%>%
group_by(date)
hrt2<-hrt2%>%
group_by(date, bpm, min_bpm, max_bpm, avg_bpm)
hrt2<-hrt2%>%
select(-bpm)
hrt2<-hrt2%>%
select(-bpm)
hrt2<-hrt2%>%
select(-1)
hrt2<-hrt
View(hrt2)
hrt2<-hrt2%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
avg_bpm=mean(bpm))
hrt2$avg_bpm<-as.integer(hrt2$avg_bpm)
hrt2<-hrt2%>%
select(-2:-3)
hrt2<-hrt2%>%
group_by(date, min_bpm, max_bpm, avg_bpm)
View(hrt2)
hrt2<-hrt2%>%
filter(distinct())
hrt2<-hrt2%>%
filter(unique())
hrt2<-hrt2%>%
filter(unique(hrt2))
View(hrt2)
hrt2<-hrt2%>%
filter(unique(date))
hrt2<-hrt2%>%
filter(unique.data.frame())
hrt2<-hrt2%>%
filter(unique.data.frame(hrt2))
View(hrt2)
hrt2<-hrt2%>%
filter(unique.data.frame(date))
hrt2<-hrt2%>%
unique.data.frame()
View(hrt2)
hrt2<-hrt
hrt2<-hrt2%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
avg_bpm=mean(bpm))
hrt2$avg_bpm<-as.integer(hrt2$avg_bpm)
hrt2<-hrt2%>%
select(-2:-3)%>%
unique.data.frame()
hrt<-hrt%>%
group_by(date)%>%
mutate(min_bpm=min(bpm),
max_bpm=max(bpm),
avg_bpm=mean(bpm))
hrt$avg_bpm<-as.integer(hrt$avg_bpm)
hrt<-hrt%>%
select(-2:-3)%>%
unique.data.frame()
View(lam)
View(hrt)
View(mam)
View(sam)
View(slp)
View(slp_sc)
unique(slp$minutesToFallAsleep)
unique(slp$minutesAfterWakeup)
#remove redundant columns
slp<-slp%>%
select(-logId, -endTime, -minutesToFallAsleep)
map(slp, class)
map_chr(slp$levels, class)
map_int(slp$levels, class)
sum(map_int(slp$levels, class))
View(slp_sc)
table(slp$efficiency)
slp_sc<-slp_sc%>%
select(-1)
slp$levels[1,]
slp$levels[1]
lvl<-slp$levels
lvl<-data.frame(lvl)
View(lvl)
world_cup_str  <-  '
[
{
"team_1": "France",
"team_2": "Croatia",
"game_type": "Final",
"score" : [4, 2]
},
{
"team_1": "Belgium",
"team_2": "England",
"game_type": "3rd/4th Playoff",
"score" : [2, 0]
}
]
'
lvl<-slp$levels
library(jsonlite)
lvl<-fromJSON(lvl)
View(slp)
#setting working directory
getwd()
slp_jsn<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2017-02-18.json")
View(slp_jsn)
slp_jsn2<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2017-03-20.json")
View(slp_jsn2)
View(slp_jsn2[[20]][[2]])
slp_jsn2$levels
lvl<-slp_jsn2$levels
View(lvl)
lvl_j<-slp_jsn2$levels
View(lvl_j)
View(slp_jsn)
lvl_j<-lvl_j%>%
unnest(summary)
lvl_j<-lvl_j%>%
unnest(cols=c(summary))
json_string  <-  '
[
{
"name": "Sabine",
"age": 36,
"favorite_foods": ["Pumpkin", "Oatmeal"]
},
{
"name": "Zoe",
"age": 40,
"favorite_foods": ["Chicken", "Pizza", "Chocolate"]
},
{
"name": "Heidi",
"age": 40,
"favorite_foods": ["Caesar Salad"]
}
]
'
json_df<-fromJSON(json_string)
View(json_df)
lvl<-slp$levels
map(lvl,function(x) length(x))
map(lvl,function(x) unique(length(x)))
map(lvl,function(x) table(length(x)))
lvl_j<-lvl_j$data
View(lvl_j)
lvl_j<-data.frame(lvl_j)
lvl_j<-unlist(lvl_j)
lvl_j<-data.frame(lvl_j)
View(lvl_j)
lvl_j<-lvl_j%>%
pivot_wider(everything())
View(lam)
View(lvl_j)
lvl_j<-slp_jsn2$levels
lvl_j<-lvl_j$data
lvl_j<-unlist(lvl_j)
lvl_j<-data.frame(lvl_j)
View(lvl_j)
slp$levels[1]
View(slp)
slp$levels[3]
slp2<-slp%>%
if (infoCode==0){separate(levels,
into=c("summary", "restless"),
sep="\n")
} else{separate(levels,
into=c("summary", "deep"),
sep="\n")
}
View(slp)
slp2<-slp%>%
if (infoCode=0){separate(levels,
into=c("summary", "restless"),
sep="\n")
} else{separate(levels,
into=c("summary", "deep"),
sep="\n")
}
slp2<-slp%>%
if (infoCode==0){
separate(levels,
into=c("summary", "restless"),
sep="\n")
} else{
separate(levels,
into=c("summary", "deep"),
sep="\n")
}
slp2<-slp%>%
if (infoCode<1){
separate(levels,
into=c("summary", "restless"),
sep="\n")
} else{
separate(levels,
into=c("summary", "deep"),
sep="\n")
}
View(slp)
library(tidyverse)
library(ggplot2)
library(plotly)
library(lubridate)
library(jsonlite)
#Separate levels column
#Use normal means or with Json files
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json")
View(slp_jsn1)
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json")
slp_jsn2<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-10-30.json")
slp_jsn3<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-11-29.json")
slp_jsn4<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-12-29.json")
slp_jsn5<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2021-01-28.json")
slp_jsn6<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2021-02-27.json")
View(slp_jsn1)
View(slp_jsn1)
slp_jsn<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
slp_merge<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
slp_merge<-rbind(slp_jsn1, slp_jsn2)
slp_merge<-rbind(slp_jsn4, slp_jsn5)
View(slp_jsn1)
View(slp_jsn2)
View(slp_jsn3)
View(slp_jsn4)
slp_merge<-do.call("rbind.fill", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
slp_merge<-rbind(slp_jsn4, slp_jsn5)
View(slp_jsn1)
map(slp_jsn1, class)
View(slp_jsn1[[33]][[1]])
View(slp)
slp_jsn1<-slp_jsn1%>%
select(-1, -32, -34)
slp_jsn1<-slp_jsn1%>%
as_tibble()
View(slp_jsn1)
slp_jsn1<-slp_jsn1%>%
select(-32)
slp_jsn1<-slp_jsn1%>%
unlist(levels)
#Separate levels column
#Json files are better
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json")
lvl<-slp_jsn1$levels
View(lvl)
map(lvl, class)
lvl2<-lvl$summary
View(lvl2)
#For each Json, extract the summary dataframe within the main dataframe
str(slp_jsn1)
str( slp_jsn1[[1]] )
View(lvl2)
View(lvl)
slp_jsn1 %>%
select(-!!names(d))
d <- select(slp_jsn1, 1)
slp_jsn1 %>%
select(-!!names(d))
a<-slp_jsn1 %>%
select(-!!names(d))
View(a)
slp_jsn1<-slp_jsn1$levels
slp_jsn1<-slp_jsn1$summary
View(slp_jsn1)
#Separate levels column
#Json files are better
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json")
slp_lvl<-slp_jsn1$levels
slp_sum<-slp_jlvl$summary
slp_lvl<-slp_jsn1$levels
slp_sum<-slp_lvl$summary
View(slp_jsn1)
View(slp)
slp_jsn1<-slp_jsn1%>%
select(1:13)%>%
cbind(slp_sum)
View(slp_jsn1)
View(slp)
convert<- function (a){
b<-a$levels
c<-b$summary
a<-a%>%
select(1:13)%>%
cbind(c)
}
#Separate levels column
#Json files are better
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json")
convert(slp_jsn1)
View(slp_jsn1)
convert<- function (a){
b<-a$levels
c<-b$summary
a<-a%>%
select(1:13)%>%
cbind(c)
return(a)
}
convert(slp_jsn1)
convert<- function (a){
b<-a$levels
c<-b$summary
a<-a%>%
select(1:13)%>%
cbind(c)
return(a)
}
convert(slp_jsn1)
convert<- function (a){
b<-a$levels
c<-b$summary
a<-a%>%
select(1:13)%>%
cbind(c)
return(a)
list2env(a,envir = .GlobalEnv)
}
convert(slp_jsn1)
my.list = lapply(slp_jsn1, convert)
my.list = lapply(slp_jsn1, convert)
my.list = map(slp_jsn1, convert)
convert<- function (a){
b<-a$levels
c<-b$summary
a<-a%>%
select(1:13)%>%
cbind(c)
return(a)
}
my.list = map(slp_jsn1, convert)
my.list = lapply(slp_jsn1, convert)
slp_lvl<-slp_jsn1$levels
slp_sum<-slp_lvl$summary
slp_jsn1<-slp_jsn1%>%
select(1:13)%>%
cbind(slp_sum)
slp_lvl<-slp_jsn2$levels
slp_sum<-slp_lvl$summary
slp_jsn2<-slp_jsn2%>%
select(1:13)%>%
cbind(slp_sum)
slp_lvl<-slp_jsn3$levels
slp_sum<-slp_lvl$summary
slp_jsn3<-slp_jsn3%>%
select(1:13)%>%
cbind(slp_sum)
slp_lvl<-slp_jsn4$levels
slp_sum<-slp_lvl$summary
slp_jsn4<-slp_jsn4%>%
select(1:13)%>%
cbind(slp_sum)
slp_lvl<-slp_jsn5$levels
slp_sum<-slp_lvl$summary
slp_jsn5<-slp_jsn5%>%
select(1:13)%>%
cbind(slp_sum)
slp_lvl<-slp_jsn6$levels
slp_sum<-slp_lvl$summary
slp_jsn6<-slp_jsn6%>%
select(1:13)%>%
cbind(slp_sum)
slp_merge<-do.call("rbind.fill", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
slp_merge<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
View(slp_jsn1)
View(slp_jsn2)
View(slp_jsn5)
slp_merge<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6) row.names=NULL)
slp_merge<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6,
row.names=NULL))
#Separate levels column
#Json files are better
slp_jsn1<-fromJSON("C:/Users/ricky/OneDrive/Desktop/School/R/FitBit/Datasets/Sleep/sleep-2020-09-30.json",
row.names=NULL)
#Merge the resulting dataframes
rownames(slp_jsn1) <- c()
rownames(slp_jsn2) <- c()
rownames(slp_jsn3) <- c()
rownames(slp_jsn4) <- c()
rownames(slp_jsn5) <- c()
rownames(slp_jsn6) <- c()
slp_merge<-do.call("rbind", list(slp_jsn1, slp_jsn2, slp_jsn3,
slp_jsn4,slp_jsn5, slp_jsn6))
slp_merge<-rbind(slp_jsn4, slp_jsn5)
View(slp_sc)
#Merge the resulting dataframes
rownames(slp_jsn1) <- make.names(slp_jsn1[,1], unique = TRUE)
rownames(slp_jsn2) <- make.names(slp_jsn2[,1], unique = TRUE)
slp_merge<-rbind(slp_jsn1, slp_jsn2)
View(slp_jsn1)
View(slp_jsn2)
slp_merge<-rbind(slp_jsn1, slp_jsn3)
View(slp_sc)
View(slp)
#For each Json, extract the summary dataframe within the main dataframe
str(slp)
row.names(slp_jsn1) <- NULL
row.names(slp_jsn2) <- NULL
View(slp_jsn1)
slp_merge<-rbind(slp_jsn1, slp_jsn2)
path <- "./Dataset/"
files <- dir(path, pattern = "*.json")
data <- files %>%
map_df(~fromJSON(file.path(path, .), flatten = TRUE))
View(data)
data<-data%>%
select(-14:-16)
View(data)
View(slp_jsn1)
path <- "./Dataset/"
files <- dir(path, pattern = "*.json")
data <- files %>%
map_df(~fromJSON(file.path(path, .), flatten = TRUE))
View(slp)
#Remove redundant columns
data$dateOfSleep<-ymd(data$dateOfSleep)
View(data)
data<-data%>%
select(-1, -3:-6, -13:-16, contains(".count"),
contains("Avg"))
View(data)
path <- "./Dataset/"
files <- dir(path, pattern = "*.json")
data <- files %>%
map_df(~fromJSON(file.path(path, .), flatten = TRUE))
ata$dateOfSleep<-ymd(data$dateOfSleep)
data$dateOfSleep<-ymd(data$dateOfSleep)
data<-data%>%
select(-1, -3:-6, -13:-16, ends_with(".count"),
ends_with("AvgMinutes"))
View(data)
path <- "./Dataset/"
files <- dir(path, pattern = "*.json")
data <- files %>%
map_df(~fromJSON(file.path(path, .), flatten = TRUE))
#Remove redundant columns
data$dateOfSleep<-ymd(data$dateOfSleep)
View(data)
data<-data%>%
select(-1, -3:-6, -13:-16,-17, -19, -20, -22, -23,
-25, -26, -28, -29, -31, -33)
View(slp)
View(slp_sc)
#Import Sleep files Separate levels column
path <- "./Dataset/"
files <- dir(path, pattern = "*.json")
slp <- files %>%
map_df(~fromJSON(file.path(path, .), flatten = TRUE))
#Remove redundant columns
slp$dateOfSleep<-ymd(slp$dateOfSleep)
slp<-slp%>%
select(-1, -3:-6, -13:-16,-17, -19, -20, -22, -23,
-25, -26, -28, -29, -31, -33)
View(dis)
View(sam)
View(slp)
sum(is.na(slp$minutesAsleep))
min(slp$minutesAsleep)
View(dis)
View(slp)
